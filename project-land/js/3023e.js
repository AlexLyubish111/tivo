let templatePath='/wp-content/themes/utservice';window.addEventListener('load',()=>{$(document).on('click','.btn_pop, .popup-youtube, .submit',function(e){e.preventDefault();let btn=$(this);poltLoadCss(()=>{loadScript(templatePath+'/send/js/vendor/jquery.magnific-popup.min.js',()=>{loadScript(templatePath+'/send/js/send.js',()=>{if(!document.querySelector('link[href*="send.css"]')){onloadCSS(loadCSS(templatePath+'/send/css/send.css'),()=>{if(!document.querySelector('link[href*="/send/css/vendor/magnific-popup.css"]')){onloadCSS(loadCSS(templatePath+'/send/css/vendor/magnific-popup.css'),()=>{setTimeout(()=>{$('.popup-youtube').magnificPopup({type:'iframe',mainClass:'mfp-fade',removalDelay:160,preloader:false,fixedContentPos:false});btn.trigger('click');},100)});}});}});});});});if(typeof superfish!=='function'){$('.sf-menu').hover(function(){loadSuperFish();});}
$(document).on('click','.gal',function(e){e.preventDefault();const btn=$(this);if(typeof PhotoSwipe==='function'){photoSwipeInit(btn);}
poltLoadCss(()=>{if(!document.querySelector('link[href*="photoswipe.css"]')){onloadCSS(loadCSS(templatePath+'/css/photoswipe/photoswipe.css'),()=>{onloadCSS(loadCSS(templatePath+'/css/photoswipe/default-skin/default-skin.css'),()=>{loadScript(templatePath+'/js/photoswipe/photoswipe.min.js',()=>{loadScript(templatePath+'/js/photoswipe/photoswipe-ui-default.min.js',()=>{photoSwipeInit(btn);});});});});}});});if(typeof poltMobMenu!=='function'){$(document).on('click','.mob-menu__open-close',function(e){e.preventDefault();const btn=$(this);loadScript(templatePath+'/js/polt_mob_menu.js',()=>{poltMobMenu(()=>{btn.trigger('click')})});});}
showHeader();});window.addEventListener('scroll',()=>{showHeader();});window.addEventListener('load',()=>{const event=document.createEvent('HTMLEvents');document.querySelectorAll('.content-visibility').forEach(el=>{el.classList.remove('content-visibility');event.initEvent('resize',true,false);el.dispatchEvent(event);});if(document.querySelectorAll('.full_tabs_card').length){document.querySelectorAll('.full_tabs_card').forEach(element=>{if(elementInViewport(element)){loadResponsiveTabs()}else{if(typeof responsiveTabs!=='function'){window.addEventListener('scroll',()=>{if(typeof responsiveTabs!=='function'){loadResponsiveTabs();}});}}});}
if(document.querySelectorAll('.swiper-container').length){document.querySelectorAll('.swiper-container').forEach(element=>{if(elementInViewport(element)){loadSwiper(()=>{swiperInit();poltLoadMatchHeight(()=>{poltMatchHeight()})})}else{if(typeof Swiper!=='function'){window.addEventListener('scroll',()=>{if(typeof Swiper!=='function'){loadSwiper(()=>{swiperInit();poltLoadMatchHeight(()=>{poltMatchHeight()})})}});}}});}
if(document.querySelectorAll('.title_traffic, .col_traffic, .title_key, .block_danger_all, .title_team, .text_team, .block_cat_car_in, .block_cat_car_all, .route_item, .tab_height').length){document.querySelectorAll('.title_traffic, .col_traffic, .title_key, .block_danger_all, .title_team, .text_team, .block_cat_car_in, .block_cat_car_all, .route_item, .tab_height').forEach(element=>{if(elementInViewport(element)){poltLoadMatchHeight(()=>{poltMatchHeight()})}else{if(typeof $.fn.matchHeight!=='function'){window.addEventListener('scroll',()=>{if(typeof $.fn.matchHeight!=='function'){poltLoadMatchHeight(()=>{poltMatchHeight()})}});}}});}
if(document.querySelectorAll('.form_car_sel').length){document.querySelectorAll('.form_car_sel').forEach(element=>{if(elementInViewport(element)){loadScript(templatePath+'/js/lardi.js');}else{if(typeof button_step_0!=='function'){window.addEventListener('scroll',()=>{if(typeof button_step_0!=='function'){loadScript(templatePath+'/js/lardi.js');}});}}});}});function polt_init_aos(){$('.wp-block-quote').each(function(){$(this).attr({'data-aos':'fade-up','data-aos-delay':'100'})});if($(window).width()>991){AOS.init({easing:'linear',offset:100,once:true,duration:500,disable:'mobile'});setTimeout(function(){AOS.refreshHard();},100)}else{AOS.init({disable:true});}}
function poltMatchHeight(){if(jQuery('.title_traffic').length){jQuery('.title_traffic').matchHeight();}
if(jQuery('.col_traffic').length){jQuery('.col_traffic').matchHeight();}
if(jQuery('.title_key').length){jQuery('.title_key').matchHeight();}
if(jQuery('.block_danger_all').length){jQuery('.block_danger_all').matchHeight();}
if(jQuery('.title_team').length){jQuery('.title_team').matchHeight();}
if(jQuery('.text_team').length){jQuery('.text_team').matchHeight();}
if(jQuery('.block_cat_car_in').length){jQuery('.block_cat_car_in').matchHeight();}
if(jQuery('.block_cat_car_all').length){jQuery('.block_cat_car_all').matchHeight();}
if(jQuery('.route_item').length){jQuery('.route_item').matchHeight();}
if($(window).width()>768){if(jQuery('.tab_height').length){jQuery('.tab_height').matchHeight({byRow:false,target:$('ul.r-tabs-nav.tab_height'),property:'min-height'});}}}
function showHeader(){let header=document.getElementsByClassName('header_all')[0];if(window.pageYOffset>0){header.classList.add('header_fixed');return true;}else{header.classList.remove('header_fixed');return false;}}
function polt_mega_menu(){$('.menu .polt_mega > .sub-menu > .menu-item-has-children').each(function(){$(this).height('');var height=$(this).height();$(this).attr('data-height',height).height(height).addClass('polt_menu_col');})
$(document).on('click','.header_all .nav_menu > .polt_mega > ul.sub-menu li ul li.menu-item-has-children > a, .header_all .nav_menu > .polt_mega > ul.sub-menu li ul li.menu-item-has-children > span',function(e){e.preventDefault();var selected=$(this);let href=selected.attr('href')?selected.attr('href'):window.location.href;if(!selected.next('ul').find('li.go_back').length){$('<li class="go_back"><a href="#">'+selected.text()+'</a></li>').insertBefore(selected.next('ul').find('li').first());}
if(!selected.next('ul').find('li.see_all').length){$('<li class="see_all"><a href="'+href+'">Смотреть все</a></li>').appendTo(selected.next('ul').first());}
var selected_li=selected.parent();var is_visible=selected.next('ul');var move_out=selected.closest('ul')
var move_out_w=move_out.parent();var top_spacing=move_out_w.find('a').outerHeight();var move_out_w_height=top_spacing+is_visible.innerHeight();selected_li.addClass('selected_li');is_visible.addClass('is_visible').css('top',top_spacing);move_out.addClass('move_out')
move_out_w.addClass('move_out_w');selected.parents('.move_out_w').last().css('height',move_out_w_height);move_out_w.parent().closest('.move_out_w').addClass('not_selected');});$(document).on('click','.polt_mega .go_back',function(e){e.preventDefault();var selected=$(this);var main_parent=selected.parents('.polt_menu_col');var move_out_w=selected.closest('.move_out_w');var top_spacing=parseInt(main_parent.find('a').outerHeight());var selected_li=selected.closest('.selected_li');var is_visible=selected.closest('ul')
var move_out=selected.closest('.move_out');var polt_menu_col_height=parseInt(selected.closest('.polt_menu_col').attr('data-height'));var move_out_w_height;move_out_w.removeClass('move_out_w');move_out_w.parent().closest('.move_out_w').removeClass('not_selected');selected_li.removeClass('selected_li');is_visible.removeClass('is_visible');move_out.removeClass('move_out');move_out_w.removeClass('move_out_w');move_out_w_height=top_spacing+parseInt(is_visible.closest('.is_visible').innerHeight());if(is_visible.closest('.is_visible').length){main_parent.css('height',move_out_w_height);}else{main_parent.height(top_spacing+parseInt(main_parent.find('.sub-menu').first().innerHeight()));}
selected.closest('ul').find('.see_all').remove();selected.remove();});}
function loadWaypoint(callback){if(typeof Waypoint==='function'){if(callback){callback();}}else{poltLoadCss(function(){loadScript(templatePath+'/js/waypoints/jquery.waypoints.min.js',()=>{loadScript(templatePath+'/js/waypoints/shortcuts/inview.min.js',()=>{if(callback){callback();}});});});}}
function loadSwiper(callback){if(typeof Swiper==='function'){if(callback){callback();}}else{poltLoadCss(function(){loadScript(templatePath+'/js/swiper.min.js',()=>{onloadCSS(loadCSS(templatePath+'/css/swiper.css'),()=>{setTimeout(()=>{if(callback){callback();}},100)});});});}}
function swiperInit(){if($('.swipre_review').length){$('.swipre_review').each(function(){var wrapper=$(this).closest('.wrap_review');new Swiper($(this),{slidesPerView:1,spaceBetween:40,autoHeight:true,watchSlidesVisibility:true,watchOverflow:true,pagination:{el:'.swiper-pagination',clickable:true},navigation:{nextEl:wrapper.find('.swiper-button-next'),prevEl:wrapper.find('.swiper-button-prev')},breakpoints:{575:{slidesPerView:1,spaceBetween:10},991:{slidesPerView:1,spaceBetween:20},1200:{slidesPerView:1,spaceBetween:40}}});});}
if($('.about_slider').length){$('.about_slider').each(function(){var wrapper=$(this).closest('.wrap_about');mySwiper=new Swiper($(this),{slidesPerView:1,spaceBetween:0,effect:'fade',speed:800,fadeEffect:{crossFade:true},});$(document).on('mouseenter click','.all_about_box_w .all_about_box',function(){$(this).closest('.all_about_box_w').find('.all_about_box').removeClass('active');$(this).addClass('active');mySwiper.slideTo($(this).index())})});}
if($('.swipre_process').length){$('.swipre_process').each(function(){var wrapper=$(this).closest('.wrap_process');new Swiper($(this),{slidesPerView:2,spaceBetween:30,autoHeight:true,watchSlidesVisibility:true,watchOverflow:true,pagination:{el:'.swiper-pagination',clickable:true},navigation:{nextEl:wrapper.find('.swiper-button-next'),prevEl:wrapper.find('.swiper-button-prev')},breakpoints:{575:{slidesPerView:1,spaceBetween:10},991:{slidesPerView:2,spaceBetween:20},1200:{slidesPerView:2,spaceBetween:30}}});});}
if($('.swipre_team').length){$('.swipre_team').each(function(){var wrapper=$(this).closest('.wrap_team');new Swiper($(this),{slidesPerView:4,slidesPerColumn:2,spaceBetween:30,watchSlidesVisibility:true,watchOverflow:true,slidesPerColumnFill:'row',pagination:{el:'.swiper-pagination',clickable:true},navigation:{nextEl:wrapper.find('.swiper-button-next'),prevEl:wrapper.find('.swiper-button-prev')},breakpoints:{575:{slidesPerView:2,slidesPerColumn:2,spaceBetween:10},767:{slidesPerView:2,slidesPerColumn:2,spaceBetween:10},991:{slidesPerView:2,spaceBetween:20},1200:{slidesPerView:3,spaceBetween:30}}});});}
if($('.swiper_cont_dang').length){$('.swiper_cont_dang').each(function(){var wrapper=$(this).closest('.wrap_danger');new Swiper($(this),{slidesPerView:3,spaceBetween:30,autoHeight:true,watchSlidesVisibility:true,watchOverflow:true,pagination:{el:'.swiper-pagination',clickable:true},navigation:{nextEl:wrapper.find('.swiper-button-next'),prevEl:wrapper.find('.swiper-button-prev')},breakpoints:{575:{slidesPerView:1,spaceBetween:10},991:{slidesPerView:1,spaceBetween:20},1200:{slidesPerView:1,spaceBetween:30}}});});}}
function elementInViewport(el){let top=el.offsetTop;let left=el.offsetLeft;let width=el.offsetWidth;let height=el.offsetHeight;while(el.offsetParent){el=el.offsetParent;top+=el.offsetTop;left+=el.offsetLeft;}
return(top<(window.pageYOffset+window.innerHeight)&&left<(window.pageXOffset+window.innerWidth)&&(top+height)>window.pageYOffset&&(left+width)>window.pageXOffset);}
function loadResponsiveTabs(){poltLoadCss(()=>{if(!document.querySelector('link[href*="responsive-tabs.css"]')){onloadCSS(loadCSS(templatePath+'/css/responsive-tabs.css'),()=>{loadScript(templatePath+'/js/jquery.responsiveTabs.min.js',()=>{setTimeout(()=>{if($('.full_tabs_card').length){$('.full_tabs_card').responsiveTabs({startCollapsed:'accordion',scrollToAccordion:true,scrollToAccordionOnLoad:true,activate:function(event,tab){if(tab._ignoreHashChange&&$('.r-tabs-accordion-title.r-tabs-state-active:visible').length){$('html, body').animate({scrollTop:$(event.currentTarget).find('.r-tabs-accordion-title.r-tabs-state-active').offset().top-$('.header_fixed').height()},200);}}});}
poltLoadMatchHeight(()=>{poltMatchHeight()})},100)});});}});}
function poltLoadCss(callback){if(typeof loadCSS==='function'&&typeof onloadCSS==='function'){if(callback){callback();}}else{loadScript(templatePath+'/js/loadCSS.js',()=>{loadScript(templatePath+'/js/onloadCSS.js',()=>{if(callback){callback();}});});}}
function poltLoadMatchHeight(callback){if(typeof $.fn.matchHeight==='function'){if(callback){callback();}}else{loadScript(templatePath+'/js/jquery.matchHeight-min.js',()=>{if(callback){callback();}});}}
function loadScript(url,callback,loaded){let selector='script[src*="'+url+'"]';if(!document.querySelector(selector)){let script=document.createElement("script");script.type='text/javascript';if(script.readyState){script.onreadystatechange=function(){if(script.readyState==='loaded'||script.readyState==='complete'){script.onreadystatechange=null;if(callback){callback();}}};}else{script.onload=function(){if(callback){callback();}};}
script.src=url;document.body.appendChild(script);}else if(loaded){loaded();}}
function photoSwipeInit(link){var index=0;var items=[];var gal=link.attr('rel');var href=link.attr('href');var elements=gal&&gal!==''?'a[rel="'+gal+'"]':link;var i=0;$(elements).each(function(){if($(this).find('img').attr('width')&&$(this).find('img').attr('height')){var width=parseInt($(this).find('img').attr('width'))<1920?parseInt($(this).find('img').attr('width'))*3:parseInt($(this).find('img').attr('width'));var height=parseInt($(this).find('img').attr('width'))<1920?parseInt($(this).find('img').attr('height'))*3:parseInt($(this).find('img').attr('height'))
var diamention=parseInt($(this).find('img').attr('width'))/parseInt($(this).find('img').attr('height'));}else{var width=parseInt($(this).find('img').width());var height=parseInt($(this).find('img').height());var diamention=width/height;}
var $href=$(this).attr('href'),$alt_sizes=1200+'x'+1200/diamention;$size=$(this).attr('data-size')?$(this).data('size').split('x'):$alt_sizes.split('x'),$width=$size[0],$height=$size[1];var item={src:$href,w:$width,h:$height}
if($(this).attr('href')==href){index=i++;}
i++;items.push(item);});var pswpElement=document.querySelectorAll('.pswp')[0];var options={index:index,showHideOpacity:true,loop:false,history:false,bgOpacity:0.9,closeOnScroll:false};var gallery=new PhotoSwipe(pswpElement,PhotoSwipeUI_Default,items,options);gallery.init();}
function loadFooterStyle(){poltLoadCss(()=>{if(!document.querySelector('link[href*="style.css"]')){onloadCSS(loadCSS(templatePath+'/style.css'),()=>{});}});}
function loadSuperFish(){poltLoadCss(()=>{if(!document.querySelector('link[href*="superfish.css"]')){onloadCSS(loadCSS(templatePath+'/css/superfish.css'),()=>{loadScript(templatePath+'/js/superfish.min.js',()=>{$("ul.sf-menu").superfish({delay:500,cssArrows:false,animation:{opacity:'show'},animationOut:{opacity:'hide'},onBeforeShow:function(){},onBeforeShow:function(){$(this).addClass('polt_open');},onBeforeHide:function(){$(this).removeClass('polt_open');}});polt_mega_menu();});});}});}
$('ol[start]').each(function(){var val=parseFloat($(this).attr("start"))-1;$(this).css('counter-increment','step-counter '+val);});